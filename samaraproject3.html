<!DOCTYPE html>
<head>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

<link href='https://fonts.googleapis.com/css?family=Londrina+Shadow' rel='stylesheet' type='text/css'>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Dancing+Script&family=Libre+Baskerville:wght@700&family=Marck+Script&family=Style+Script&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Dancing+Script&family=Libre+Baskerville:wght@700&family=Marck+Script&family=Pinyon+Script&family=Style+Script&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Dancing+Script&family=Imperial+Script&family=Libre+Baskerville:wght@700&family=Marck+Script&family=Pinyon+Script&family=Style+Script&display=swap" rel="stylesheet">

<style>
body {
  font-family: 'Marck Script', cursive;
  margin: 0 auto;
  max-width: 600px;
  background: #555;
}
div {
  height: 200px;
  background-size: cover;
  position: relative;
  margin: 40px 0 0 0;
  border-radius: 12px;
}
input {
	font-size: 22px;
}

h1 {
  font-family: 'Londrina Shadow', cursive;
  text-align: center;
  font-size: 75px;
  color: purple;
  margin: 60px 0 0 0;
  font-family: 'Dancing Script', cursive;
}
h2 {
  text-align: center;
  color: lavender;
  margin: 0px 0 70px 0;
  font-family:'Imperial Script', cursive;
}
p {
  color: rgba(255,25,255,1);
  background: black;
  background: linear-gradient(bottom, rgba(5,555,5,.55), rgba(55,55,55,.5));
  background: -webkit-linear-gradient(bottom, rgba(55,777,255,6), rgba(0,0,.5,.4));
  background: -moz-linear-gradient(bottom, rgba(788,0,5,3), rgba(0,0,5,.5));
  padding: 10px;
  line-height: 28px;
  text-align: justify;
  position: absolute;
  bottom: 0;
  margin: 0;
  height: 30px;
  transition: height .5s;
  -webkit-transition: height .5s;
  -moz-transition: height .5s;
}

small {
  opacity: 0;
}

.show-description p {
  height: 150px;
}

.show-description small {
  opacity: 1;
}

.first{
  background-image: url("https://c.ndtvimg.com/xzigujayond_fish-curry_625x300.jpg");
}
.second{
  background-image: url("https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSfthT04CRuPbjNIyXuUqlpg8Nuh_FXK5a8AA&usqp=CAU");
}
.dessert{
  background-image: url("https://blogbox.indianeagle.com/wp-content/uploads/2014/09/rosogolla-sweets-of-bengal.jpg");
}
.price {
  float: right;
}
@media (max-width: 500px) {
  h1 {
    font-size: 50px;
    margin-top: 20px;
    line-height: 40px;
  }
  h2 {
    font-size: 20px;
    margin: 20px 0 30px 0;
  }
  div {
    margin: 20px 12px 0 12px;
  }
  p {
    font-size: 20px;
    line-height: 24px;
  }
  small {
    font-size: 16px;
  }
}

</style>

</head>

<body>
<h1>Elana's restaurant</h1>
<h2>A dakha city eatery</h2>
<div class="first">
	<input type="number" min="0" style="width: 50px" class="quantities">
  <p>Fish soup <span class="price">$23</span><br />
  <small>A thick and spicy fish curry. Bengali Doi Maach has marinated pieces of fish cooked in a yogurt based gravy. The curry is robust, slightly spicy and delicately sour with a balance of curd and spices. The fish is really tender and soft having absorbed the wonderful flavors of the gravy.  </small></p>
</div>

<div class="second">
	<input type="number" min="0" style="width: 50px" class="quantities">
  <p>Fish and curry <span class="price">$18</span><br />
  <small>Homesick Bengalis and all those in love with the cuisine from Bengal, We've got you the best of Bengali restaurants. So whether you crave for some Kolkata-style biryani or the famous chops, these are the places you should be at.</small></p>
</div>
  
<div class="dessert">
	<input type="number" min="0" style="width: 50px" class="quantities">
  <p>Rosogolla<span class="price">$10</span><br />
  <small>Rosogolla is unique to the Bengali hospitality. A piece of rosogolla is often accompanied by a couple of sandesh on plates served to guests in Bengali households. Both Bengal and Odisha, two neighboring states of India, claim to the birthplace of this all-India famous sweet. Bengal may not be the origin, but rosogolla has got blended into the cultural fabric of the Bengali society over years. Known as Khirmohana in Odisha, Rasbari in Nepal and Rajbhog in Rajasthan, this Bengali sweet has traveled across the world.</small></p>
</div>
<br><br>
  <input id="Name" type="name" placeholder="Your name">
  <input id="Email" type="email" placeholder="Your email">
  <input id="submit" type="submit">
<br><br>
<script>
  $('div').on('click', function() {
      $(this).toggleClass('show-description');
  });
</script>
<script type="module">
  // Import the functions you need from the SDKs you need
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { getDatabase, ref, set } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";
  // TODO: Add SDKs for Firebase products that you want to use
  // https://firebase.google.com/docs/web/setup#available-libraries

  // Your web app's Firebase configuration
  // For Firebase JS SDK v7.20.0 and later, measurementId is optional
  const firebaseConfig = {
    apiKey: "AIzaSyB9Kk_MarEKqHkGfjC8US3VONKvN-gT44g",
    authDomain: "website-from-dash-assemb-1edd3.firebaseapp.com",
    projectId: "website-from-dash-assemb-1edd3",
    storageBucket: "website-from-dash-assemb-1edd3.appspot.com",
    messagingSenderId: "406158864607",
    appId: "1:406158864607:web:7a6048f25c4d1ff4b0b96a",
    measurementId: "G-RDM6YDXSMP"
  };

  // Initialize Firebase
  const app = initializeApp(firebaseConfig);
  const db = getDatabase(app);

    const Name = document.querySelector("#Name") 
    const Email = document.querySelector("#Email")
    document.querySelector('#submit').addEventListener('click', Submit)
    const quantities = document.querySelectorAll(".quantities")
    const prices = document.querySelectorAll(".price") 
   
    const itemsList = ["Fish soup", "Fish and curry", "Rosogolla"]
  
  
  function Submit() {
    const timestamp = buildTimestamp()
	  let total = 0
	  let cart = { }
	  for  (let i=0; i<quantities.length; i=i+1) {
	  	if (quantities[i].value != "0" && quantities[i].value != "") {	
			let price = prices[i].innerHTML.replace('$', '')
			total = total + quantities[i].value * price 
	  		cart[itemsList[i]] = parseInt(quantities[i].value) 
	  	}
	  	quantities[i].value = ""
	  }
	  
  
    set(ref(db, timestamp), {
  	  Name: Name.value,
        email: Email.value,
		cart: cart,
		  totalPrice: total,
		  paid: "not yet",
		
    });

    Name.value = ""
    Email.value = ""
  }
  function buildTimestamp() {
    const now = new Date();
    let timestamp = now.getFullYear().toString() + "/";
    //const month = now.toLocaleString('default', { month: 'long' });

    let month = now.getMonth()+1   //add 1 because Javascript uses 0 for January
    month = month.toString()
    month = addLeadingZero(month)
    timestamp += month + "/"; 

    let date = now.getDate().toString()
    date = addLeadingZero(date)
    timestamp += date + "/";

    let hours = now.getHours().toString()
    hours = addLeadingZero(hours)
    timestamp += hours + ":";

    let minutes = now.getMinutes().toString()
    minutes = addLeadingZero(minutes)
    timestamp += minutes + ":";

    let seconds = now.getSeconds().toString()
    seconds = addLeadingZero(seconds)
    timestamp += seconds;

    return timestamp
  }

  function addLeadingZero(units) {
  	if (units.length < 2) {
  		units = "0" + units
  	}
  	return units
  }
  
</script>
</body>
